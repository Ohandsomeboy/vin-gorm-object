var oe=Object.defineProperty;var K=Object.getOwnPropertySymbols;var se=Object.prototype.hasOwnProperty,ne=Object.prototype.propertyIsEnumerable;var O=(g,r,c)=>r in g?oe(g,r,{enumerable:!0,configurable:!0,writable:!0,value:c}):g[r]=c,W=(g,r)=>{for(var c in r||(r={}))se.call(r,c)&&O(g,c,r[c]);if(K)for(var c of K(r))ne.call(r,c)&&O(g,c,r[c]);return g};import{d as T,_ as te,o as _,c as f,a as n,k as p,q as ie,r as v,b as R,w as a,e,f as U,F as P,u as w,g as x,E as b,i as re,v as de,n as X,x as ce,l as Y,t as A,y as _e,z as Z,A as me}from"./index.bb801fe3.js";import{a as B}from"./api.a0d27d23.js";import{_ as pe}from"./plugin-vue_export-helper.21dcd24c.js";import{e as ee}from"./edit.ae9d0e3c.js";const ve=T({name:"CirclePlus"}),ge={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},fe=n("path",{fill:"currentColor",d:"M352 480h320a32 32 0 1 1 0 64H352a32 32 0 0 1 0-64z"},null,-1),Fe=n("path",{fill:"currentColor",d:"M480 672V352a32 32 0 1 1 64 0v320a32 32 0 0 1-64 0z"},null,-1),be=n("path",{fill:"currentColor",d:"M512 896a384 384 0 1 0 0-768 384 384 0 0 0 0 768zm0 64a448 448 0 1 1 0-896 448 448 0 0 1 0 896z"},null,-1),ye=[fe,Fe,be];function Ce(g,r,c,V,y,l){return _(),f("svg",ge,ye)}var le=te(ve,[["render",Ce]]);const he=T({name:"Remove"}),Be={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},xe=n("path",{fill:"currentColor",d:"M352 480h320a32 32 0 1 1 0 64H352a32 32 0 0 1 0-64z"},null,-1),Ve=n("path",{fill:"currentColor",d:"M512 896a384 384 0 1 0 0-768 384 384 0 0 0 0 768zm0 64a448 448 0 1 1 0-896 448 448 0 0 1 0 896z"},null,-1),$e=[xe,Ve];function ke(g,r,c,V,y,l){return _(),f("svg",Be,$e)}var we=te(he,[["render",ke]]);const Ee=x("\u8F93\u5165\uFF1A"),ze=x("\u8F93\u51FA\uFF1A"),Ae=x("\u521B\u5EFA "),De=x("\u53D6\u6D88"),Se=T({props:["sortList","selectQues"],emits:["cancel","submit"],setup(g,{emit:r}){const c=g,V=p("default"),y=p(),l=p({title:"",content:"",max_runtime:0,max_mem:0,test_cases:[{input:"",output:""}],problem_categories:[]});if(c.selectQues){let i=c.selectQues;i.problem_categories instanceof Array&&(i.problem_categories=i.problem_categories.map(d=>d.category_id)),(!Array.isArray(i.test_cases)||i.test_cases.length==0)&&(i.test_cases=[{input:"",output:""}]),l.value=i}const h=()=>{r("cancel")},E=ie({title:[{required:!0,message:"\u8BF7\u8F93\u5165",trigger:"blur"}],content:[{required:!0,message:"\u8BF7\u8F93\u5165",trigger:"blur"}],max_runtime:[{required:!0,message:"\u8BF7\u8F93\u5165",trigger:"blur"},{type:"number",message:"\u8BF7\u8F93\u5165\u6570\u5B57",trigger:"blur"}],max_mem:[{required:!0,message:"\u8BF7\u8F93\u5165",trigger:"blur"},{type:"number",message:"\u8BF7\u8F93\u5165\u6570\u5B57",trigger:"blur"}],test_cases:[{required:!0,message:"\u8BF7\u8F93\u5165",trigger:"blur"}],problem_categories:[{type:"array",required:!0,message:"Please select at least one activity type",trigger:"change"}]}),D=()=>{l.value.test_cases.push({input:"",output:""})},S=i=>{l.value.test_cases.length>1&&l.value.test_cases.splice(i,1)},q=async i=>{!i||await i.validate((d,F)=>{d?l.value.identity?B.editProblem(l.value).then(m=>{m.data.code==200?(b.success("\u6210\u529F"),r("submit")):b(m.data.msg)}):B.addProblem(l.value).then(m=>{m.data.code==200?(b.success("\u6210\u529F"),r("submit")):b(m.data.msg)}):console.log("error submit!",F)})};return(i,d)=>{const F=v("el-input"),m=v("el-form-item"),H=v("el-option"),j=v("el-select"),$=v("el-col"),L=v("el-icon"),z=v("el-row"),M=v("el-button"),C=v("el-form");return _(),R(C,{ref_key:"ruleFormRef",ref:y,model:l.value,rules:w(E),"label-width":"120px",class:"demo-ruleForm",size:V.value},{default:a(()=>[e(m,{label:"\u95EE\u9898\u540D\u79F0",prop:"title"},{default:a(()=>[e(F,{modelValue:l.value.title,"onUpdate:modelValue":d[0]||(d[0]=s=>l.value.title=s)},null,8,["modelValue"])]),_:1}),e(m,{label:"\u5185\u5BB9",prop:"content "},{default:a(()=>[e(F,{modelValue:l.value.content,"onUpdate:modelValue":d[1]||(d[1]=s=>l.value.content=s),type:"textarea"},null,8,["modelValue"])]),_:1}),e(m,{label:"\u5206\u7C7B",prop:"problem_categories"},{default:a(()=>[e(j,{modelValue:l.value.problem_categories,"onUpdate:modelValue":d[2]||(d[2]=s=>l.value.problem_categories=s),placeholder:"\u8BF7\u9009\u62E9",multiple:"",style:{width:"100%"}},{default:a(()=>[(_(!0),f(P,null,U(g.sortList,s=>(_(),R(H,{label:s.name,value:s.id,key:s.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(m,{label:"\u6700\u5927\u8FD0\u884C\u65F6\u95F4",prop:"max_runtime"},{default:a(()=>[e(F,{modelValue:l.value.max_runtime,"onUpdate:modelValue":d[3]||(d[3]=s=>l.value.max_runtime=s),modelModifiers:{number:!0}},null,8,["modelValue"])]),_:1}),e(m,{label:"\u6700\u5927\u5360\u7528\u5185\u5B58",prop:"max_mem"},{default:a(()=>[e(F,{modelValue:l.value.max_mem,"onUpdate:modelValue":d[4]||(d[4]=s=>l.value.max_mem=s),modelModifiers:{number:!0}},null,8,["modelValue"])]),_:1}),e(m,{label:"\u6D4B\u8BD5\u6848\u4F8B",prop:"test_cases"},{default:a(()=>[(_(!0),f(P,null,U(l.value.test_cases,(s,Q)=>(_(),R(m,{"label-width":"0",key:Q},{default:a(()=>[e(z,{gutter:20},{default:a(()=>[e($,{span:4,style:{"text-align":"right"}},{default:a(()=>[Ee]),_:1}),e($,{span:6},{default:a(()=>[e(F,{type:"textarea",modelValue:s.input,"onUpdate:modelValue":o=>s.input=o,rows:"6",cols:"40"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),e($,{span:4,style:{"text-align":"right"}},{default:a(()=>[ze]),_:1}),e($,{span:6},{default:a(()=>[e(F,{type:"textarea",modelValue:s.output,"onUpdate:modelValue":o=>s.output=o,rows:"6",cols:"40"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),e($,{span:4},{default:a(()=>[e(L,{onClick:D},{default:a(()=>[e(w(le))]),_:1}),e(L,{onClick:o=>S(Q)},{default:a(()=>[e(w(we))]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1}),e(m,null,{default:a(()=>[e(M,{type:"primary",onClick:d[5]||(d[5]=s=>q(y.value))},{default:a(()=>[Ae]),_:1}),e(M,{onClick:h},{default:a(()=>[De]),_:1})]),_:1})]),_:1},8,["model","rules","size"])}}});const Ue={class:"ques-list"},Pe={class:"dialog-footer"},qe=x("\u53D6\u6D88"),Le=x("\u786E\u5B9A"),Me={class:"flex-box"},Qe={class:"sort-list"},Ne=x(" \u5206\u7C7B\uFF1A"),Re=["onClick"],Te={class:"edit"},He={class:"list"},je=x("\u65B0\u589E\u95EE\u9898"),Ge={class:"scroll"},Ie={class:"title"},Je={class:"sort"},Ke={key:0},Oe={class:"msg"},We={class:"edit"},Xe={class:"pagi"},Ye=T({setup(g){re();const r=p(!1),c=p([]),V=p([]),y=p(!1),l=p({name:"",id:""}),h=p(!1),E=p({}),D=p(10),S=p(1),q=p(0),i=p(null),d=p(""),F=()=>{h.value=!1,E.value={}},m=()=>{F(),C(i.value)},H=o=>{B.getProblemDetail({identity:o.identity}).then(t=>{t.data.data&&(E.value=t.data.data,h.value=!0)})},j=o=>{C(i.value)},$=o=>{l.value=W({},o),y.value=!0},L=o=>{C(i.value)},z=()=>{y.value=!1,l.value={name:"",id:""}},M=o=>{me.confirm("\u786E\u5B9A\u8981\u5220\u9664\u8BE5\u5206\u7C7B\u5417?","\u63D0\u793A",{confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88",type:"warning"}).then(()=>{B.delSort({identity:o.identity}).then(t=>{t.data.code==200?(b.success(t.data.msg),s()):b.warning(t.data.msg)})}).catch(()=>{})},C=o=>{i.value=o,r.value=!0,B.getProblemList({category_identity:o,size:D.value,page:S.value,keyword:d.value}).then(t=>{r.value=!1,t&&t.data&&(c.value=t.data.data.list,q.value=t.data.data.count),console.log(t)})};C(null);const s=()=>{B.getSortList({}).then(o=>{o&&o.data&&(V.value=o.data.data.list)})};s();const Q=()=>{l.value.name?l.value.id?B.editSort(l.value).then(o=>{o.data.code==200?(b.success(o.data.msg),z(),s()):b.warning(o.data.msg)}):B.addSort({name:l.value.name}).then(o=>{o.data.code==200?(b.success(o.data.msg),z(),s()):b.warning(o.data.msg)}):b.warning("\u8BF7\u8F93\u5165\u5206\u7C7B\u540D\u79F0")};return(o,t)=>{const I=v("el-input"),G=v("el-button"),J=v("el-dialog"),N=v("el-icon"),ue=v("el-pagination"),ae=de("loading");return _(),f("div",Ue,[e(J,{modelValue:y.value,"onUpdate:modelValue":t[1]||(t[1]=u=>y.value=u),title:l.value.id?"\u7F16\u8F91\u5206\u7C7B":"\u65B0\u589E\u5206\u7C7B",width:"30%","before-close":z},{footer:a(()=>[n("span",Pe,[e(G,{onClick:z},{default:a(()=>[qe]),_:1}),e(G,{type:"primary",onClick:Q},{default:a(()=>[Le]),_:1})])]),default:a(()=>[e(I,{modelValue:l.value.name,"onUpdate:modelValue":t[0]||(t[0]=u=>l.value.name=u),placeholder:"\u8BF7\u8F93\u5165\u5206\u7C7B\u540D\u79F0"},null,8,["modelValue"])]),_:1},8,["modelValue","title"]),e(J,{modelValue:h.value,"onUpdate:modelValue":t[2]||(t[2]=u=>h.value=u),title:E.value.id?"\u7F16\u8F91\u95EE\u9898":"\u65B0\u589E\u95EE\u9898",width:"70%","close-on-click-modal":!1,"before-close":F},{default:a(()=>[h.value?(_(),R(Se,{key:0,onCancel:F,selectQues:E.value,onSubmit:m,sortList:V.value},null,8,["selectQues","sortList"])):Y("",!0)]),_:1},8,["modelValue","title"]),n("div",Me,[n("div",Qe,[n("h3",null,[Ne,e(N,{onClick:t[3]||(t[3]=u=>y.value=!0)},{default:a(()=>[e(w(le))]),_:1})]),n("div",{onClick:t[4]||(t[4]=u=>C(null)),class:X(i.value?"":"act")},"\u5168\u90E8",2),(_(!0),f(P,null,U(V.value,u=>(_(),f("div",{key:u.id,onClick:k=>C(u.identity),class:X(i.value==u.identity?"act":"")},[n("span",null,A(u.name),1),n("div",Te,[e(N,{title:"\u5220\u9664",onClick:Z(k=>M(u),["stop"])},{default:a(()=>[e(w(_e))]),_:2},1032,["onClick"]),e(N,{title:"\u7F16\u8F91",onClick:Z(k=>$(u),["stop"])},{default:a(()=>[e(w(ee))]),_:2},1032,["onClick"])])],10,Re))),128))]),ce((_(),f("div",He,[n("h3",null,[e(I,{style:{width:"200px","margin-right":"10px"},modelValue:d.value,"onUpdate:modelValue":t[5]||(t[5]=u=>d.value=u),clearable:"",onChange:t[6]||(t[6]=u=>C(i.value)),onClear:t[7]||(t[7]=u=>C(null)),placeholder:"\u8BF7\u641C\u7D22","suffix-icon":o.Search},null,8,["modelValue","suffix-icon"]),e(G,{type:"primary",onClick:t[8]||(t[8]=u=>h.value=!0)},{default:a(()=>[je]),_:1})]),n("div",Ge,[(_(!0),f(P,null,U(c.value,u=>(_(),f("div",{class:"item",key:u.id},[n("div",null,[n("div",Ie,[n("b",null,A(u.title),1),n("div",Je,[(_(!0),f(P,null,U(u.problem_categories,k=>(_(),f("span",{key:k.id},[k.category_basic?(_(),f("b",Ke,A(k.category_basic.name),1)):Y("",!0)]))),128))])]),n("div",Oe,[n("span",null,"\u521B\u5EFA\u65F6\u95F4\uFF1A"+A(u.created_at),1),n("span",null,"\u63D0\u4EA4\u4EBA\u6570\uFF1A"+A(u.submit_num),1),n("span",null,"\u901A\u8FC7\u4EBA\u6570\uFF1A"+A(u.pass_num),1)])]),n("div",We,[e(N,{title:"\u7F16\u8F91",onClick:k=>H(u)},{default:a(()=>[e(w(ee))]),_:2},1032,["onClick"])])]))),128))])])),[[ae,r.value]])]),n("div",Xe,[e(ue,{currentPage:S.value,"onUpdate:currentPage":t[9]||(t[9]=u=>S.value=u),"page-size":D.value,"onUpdate:page-size":t[10]||(t[10]=u=>D.value=u),"page-sizes":[10,20,50,100],layout:"total,sizes, prev, pager, next",total:q.value,onSizeChange:j,onCurrentChange:L},null,8,["currentPage","page-size","total"])])])}}});var at=pe(Ye,[["__scopeId","data-v-52e6953e"]]);export{at as default};
